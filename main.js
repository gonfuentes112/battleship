(()=>{"use strict";var t={208:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([t.id,"* {\n    margin: 0;\n    box-sizing: border-box;\n}\n\nbody{\n    background-color: black;\n    height: 100vh;\n    width: 100vw;\n    display: grid;\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: repeat(10, 1fr);\n    line-height: 1.5;\n    color: darkviolet;\n    gap: 0.5rem;\n}\n\n#topdiv {\n    grid-row: 1;\n    grid-column: 2 / 10;\n    text-align: center;\n    font-size: 3rem;\n}\n\n#cpuboardcontainer {\n    grid-row: 2 / 5;\n    grid-column: 4 / 8;\n    min-height: 20vh;\n    min-width: 10vw;\n}\n\n#cpuboard {\n    background-color: darkgray;\n    display: grid;\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: repeat(10, 1fr);\n    height: 100%;\n    width: 100%;\n}\n\n.cpublank {\n    background-color: darkgray;\n\n}\n\n.cpuwater {\n    background-color: darkblue;\n}\n\n.cpuhit {\n    background-color: darkred;\n}\n\n#playerboardcontainer {\n    grid-row: 5 / 8;\n    grid-column: 4 / 8;\n    min-height: 20vh;\n    min-width: 10vw;\n}\n\n#playerboard {\n    display: grid;\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: repeat(10, 1fr);\n    background-color: darkblue;\n    height: 100%;\n    width: 100%;\n}\n\n.playerblank {\n    background-color: darkblue;\n    border: 1px solid black;\n}\n\n.playerhit {\n    background-color: darkred;\n    color: black;\n}\n\n#buttoncontainer {\n    grid-row: 9;\n    grid-column: 4/8;\n    display: flex;\n    width: 100%;\n    justify-content: center;\n    gap: 5rem;\n}\n\nbutton {\n    height: 5rem;\n    width: 5rem;\n    background-color: black;\n    color: darkviolet;\n    border: 1px solid darkviolet;\n    border-radius: 0.5rem;\n}\n\n.hidden {\n    display: none;\n}\n\n.cell {\n    min-height: 1.5rem;\n    border: 1px solid black;\n    text-align: center;\n}\n\n.cursorenabled {\n    cursor: pointer;\n}\n\n#winnerdiv {\n    grid-row: 8;\n    grid-column: 4 / 8;\n    text-align: center;\n    font-size: 3.5rem;\n}",""]);const s=i},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);r&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var a={},i=[],s=0;s<t.length;s++){var c=t[s],l=r.base?c[0]+r.base:c[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var h=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var g=o(p,r);r.byIndex=s,e.splice(s,0,{identifier:u,updater:g,references:1})}i.push(u)}return i}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var a=r(t=t||[],o=o||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var s=n(a[i]);e[s].references--}for(var c=r(t,o),l=0;l<a.length;l++){var d=n(a[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}a=c}}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(72),o=n.n(r),a=n(825),i=n.n(a),s=n(659),c=n.n(s),l=n(56),d=n.n(l),u=n(540),h=n.n(u),p=n(113),g=n.n(p),f=n(208),m={};m.styleTagTransform=g(),m.setAttributes=d(),m.insert=c().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=h(),o()(f.A,m),f.A&&f.A.locals&&f.A.locals;class b{constructor(t){this._length=t,this._hits=0}getLength(){return this._length}isSunk(){return this._hits>=this._length}hit(){this._hits++}}class y{static EMPTY=0;static SHIP=1;static ALREADY_ATTACKED=2;static HIT=3;constructor(t){this._size=t,this._board=Array(t).fill().map((()=>Array(t).fill(y.EMPTY))),this._ships=[],this._coordsWithShips=new Map,this._misses=[]}size(){return this._size}getValue(t,e){return this._board[t][e]}isValidCoord(t,e){return t>=0&&t<this.size()&&e>=0&&e<this.size()}static getShipLength(t,e){const n=Math.abs(e[0]-t[0])+1,r=Math.abs(e[1]-t[1])+1;return 1!==n?n:r}static getDimensions(t,e){const n=[];let r;if(t[1]===e[1])if(r=t[0]<e[0]?1:-1,r>0)for(let o=t[0];o<=e[0];o+=r)n.push([o,t[1]]);else for(let o=t[0];o>=e[0];o+=r)n.push([o,t[1]]);else if(r=t[1]<e[1]?1:-1,r>0)for(let o=t[1];o<=e[1];o+=r)n.push([t[0],o]);else for(let o=t[1];o>=e[1];o+=r)n.push([t[0],o]);return n}canPlaceShip(t,e){return y.getDimensions(t,e).every((t=>this.isValidCoord(...t)&&this.getValue(...t)===y.EMPTY))}placeShip(t,e){const n=new b(y.getShipLength(t,e));this._ships.push(n),y.getDimensions(t,e).forEach((t=>{const[e,r]=t;this._board[e][r]=y.SHIP,this._coordsWithShips.set(`${t}`,n)}))}receiveAttack(t,e){const n=`${[t,e]}`;this._coordsWithShips.has(n)?(this._coordsWithShips.get(`${n}`).hit(),this._board[t][e]=y.HIT):(this._board[t][e]=y.ALREADY_ATTACKED,this._misses.push([t,e]))}allShipsSunk(){return this._ships.every((t=>t.isSunk()))}}class v{constructor(t){this._name=t,this._board=new y(10)}get name(){return this._name}get board(){return this._board}}function k(){const t=document.getElementById("cpuboard");for(let e=0;e<10;e++)for(let n=0;n<10;n++){const r=document.createElement("div");r.classList.add("cell"),r.classList.add("cpublank"),r.dataset.row=e,r.dataset.column=n,t.appendChild(r)}}function A(){const t=document.getElementById("playerboard");for(let e=0;e<10;e++)for(let n=0;n<10;n++){const r=document.createElement("div");r.classList.add("cell"),r.classList.add("playerblank"),r.dataset.row=e,r.dataset.column=n,t.appendChild(r)}}!function(){k(),A();const t=document.getElementById("place"),e=document.getElementById("start"),n=document.getElementById("reset");let r;function o(t){if("human"===t){const e=r.getPlayer(t);r.initializeShips(e).forEach((t=>{t.forEach((t=>{const[e,n]=t;document.querySelector(`.playerblank[data-row="${e}"][data-column="${n}"]`).innerText="S"}))}))}else{const e=r.getPlayer(t);r.initializeShips(e)}}function a(t){const e=document.getElementById("cpuboard");e.classList.toggle("cursorenabled"),e.setAttribute("inert",!0),document.getElementById("winnerdiv").innerText=t}e.classList.toggle("hidden"),n.classList.toggle("hidden"),t.addEventListener("click",(function(){e.classList.contains("hidden")&&e.classList.toggle("hidden"),t.innerText="Another one",document.querySelectorAll(".playerblank").forEach((t=>{""!==t.innerText&&(t.innerText="")})),r=function(){const t=new v("p1"),e=new v("p2");let n,r=!1;const o=new Map;function a(t){return[Math.floor(Math.random()*t),Math.floor(Math.random()*t)]}function i(t,e){const[n,r]=a(t),[o,i]=function(){const t=Math.floor(2*Math.random()),e=Math.floor(2*Math.random());return[[1,-1][t],[0,1][e]]}(),s=[n,r];let c=[n,r];return c[i]+=o*(e-1),[s,c]}function s(t,e,n){return t.board.receiveAttack(e,n),t.board.getValue(e,n)}return o.set("carrier",5),o.set("battleship",4),o.set("destroyer",3),o.set("submarine",3),o.set("patrolboat",2),{initializeShips:function(t){const e=[];let n=t.board;return o.forEach((t=>{const r=function(t,e){let n,r,o=!1;const a=t.size();for(;!o;)[n,r]=i(a,e),o=t.canPlaceShip(n,r);return[n,r]}(n,t);n.placeShip(...r),e.push(y.getDimensions(...r))})),e},getPlayer:function(n){return"human"===n?t:e},attack:s,hasPlayerLost:function(t){return t.board.allShipsSunk()},cpuAttack:function(){let e;if(r){const[r,o]=n,a=[[r+1,o],[r-1,o],[r,o+1],[r,o-1]].filter((e=>{const n=t.board;return n.isValidCoord(...e)&&n.getValue(...e)!==y.ALREADY_ATTACKED&&n.getValue(...e)!==y.HIT}));e=a.length>0?a[Math.floor(Math.random()*a.length)]:i()}else e=i();const o=s(t,...e);return r=o===y.HIT,n=e,{result:o,coord:e};function i(){let e,n=!1;const r=t.board;for(;!n;)e=a(t.board.size()),n=r.getValue(...e)!==y.ALREADY_ATTACKED&&r.getValue(...e)!==y.HIT;return e}}}}(),o("human"),o("cpu")})),e.addEventListener("click",(function(){t.classList.toggle("hidden"),e.classList.toggle("hidden"),n.classList.toggle("hidden");const o=document.getElementById("cpuboard");o.classList.toggle("cursorenabled"),o.addEventListener("click",(t=>{!function(t){const e=t.target;if(!e.classList.contains("cpublank"))return;const n=r.getPlayer("cpu"),o=e.dataset.row,i=e.dataset.column;e.classList.toggle("cpublank"),r.attack(n,o,i)===y.ALREADY_ATTACKED?e.classList.toggle("cpuwater"):e.classList.toggle("cpuhit"),r.hasPlayerLost(n)&&a("You win!"),function(){const{result:t,coord:[e,n]}=r.cpuAttack(),o=document.querySelector(`.playerblank[data-row="${e}"][data-column="${n}"]`);t===y.ALREADY_ATTACKED?o.innerText="X":o.classList.toggle("playerhit")}();const s=r.getPlayer("human");r.hasPlayerLost(s)&&a("You lose!")}(t)}))})),n.addEventListener("click",(function(){t.classList.toggle("hidden"),t.innerText="Place ships",n.classList.toggle("hidden"),document.getElementById("cpuboard").innerHTML="",document.getElementById("playerboard").innerHTML="",k(),A()}))}()})();